import { Tween } from "gsap/gsap-core.js";
import "./style.css";
import pirateShip from "/pirateship.svg";
import viteLogo from "/vite.svg";
import { gsap } from "gsap";

document.querySelector("#app").innerHTML = `
  <div>
    <a href="https://vitejs.dev" target="_blank">
      <img src="${viteLogo}" class="logo" alt="Vite logo" />
    </a>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank">
      <img src="${pirateShip}" class="logo vanilla" alt="JavaScript logo" />
    </a>
    <h1>History of Waves</h1>
    <div id="sun">
      <div id="sun-wrapper">
        <svg id="sun-base" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="50" />
        </svg>
        <svg id="sun-rays" viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg">
          <circle cx="70" cy="70" r="70" />
        </svg>
      </div>
    </div>
<svg
   width="210mm"
   height="297mm"
   viewBox="0 0 210 297"
   version="1.1"
   id="boat"
   xml:space="preserve"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg"><defs
     id="defs1" />
     <g>
  <path
       style="fill:#905a23;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="m 88.439187,170.83862 c 0,0 -10.008729,-116.480877 -12.856038,-129.854607 -2.84731,-13.373729 1.466795,-3.019874 2.329617,1.984489 0.862822,5.004364 15.703349,110.958818 17.601554,129.336918 1.898208,18.37809 -6.730005,-1.38051 -6.730005,-1.38051"
       id="path2" /><path
       style="fill:#905a23;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="M 42.795938,153.75476 37.27388,93.443551 38.826961,93.01214 c 0,0 5.694619,34.59914 8.110519,61.34659 2.415899,26.74747 -4.141542,-0.60397 -4.141542,-0.60397 z"
       id="path3" /><path
       style="fill:#905a23;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="m 148.31899,171.61516 c 0,0 -5.3495,-77.999045 -4.74552,-83.262256 0.60397,-5.263211 2.4159,2.157053 2.4159,2.157053 0,0 7.2477,53.063513 8.54193,80.501233 1.29423,27.43772 -6.21231,0.60397 -6.21231,0.60397 z"
       id="path4" /><path
       style="fill:#000000;stroke-width:0.251052"
       d="m 74.185336,40.647618 c 0,0 -6.941027,-3.625581 -13.308887,2.273091 -6.367855,5.898671 -6.405119,7.840445 -13.976703,7.933509 -7.571583,0.09307 10.362631,8.256671 10.362631,8.256671 0,0 -2.281549,3.952279 -6.987574,4.19602 -4.706024,0.24374 3.334629,4.846381 8.517462,2.959983 5.182835,-1.886397 9.558,-9.171636 19.874008,-6.039891 10.316005,3.131747 -3.095435,-3.280691 -3.095435,-3.280691 0,0 -8.366828,-5.953036 -1.651071,-12.71289 6.71576,-6.759856 0.265569,-3.585802 0.265569,-3.585802 z"
       id="path5" /><path
       style="fill:#905a23;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="m 30.749384,155.69926 c 0.854149,22.69597 3.416598,26.96672 9.517666,31.23747 6.101068,4.27075 15.130648,21.96384 15.130648,21.96384 42.219393,26.60066 81.998352,10.00576 90.539852,5.24692 8.5415,-4.75883 28.78377,-42.07935 28.95633,-42.5539 0.17257,-0.47455 0.48132,-0.61116 0.48132,-0.61116 0,0 21.32324,-13.81892 -2.10487,-5.7655 -23.4281,8.0534 -58.08216,8.78553 -74.188985,7.80936 -16.106819,-0.97617 -18.791287,-8.78554 -22.695971,-15.61873 -3.904684,-6.8332 -11.47001,-5.85703 -11.47001,-5.85703 l -33.677894,1.46426 c -1.038723,1.68908 -1.254428,0.65369 -0.9093,1.64594 0.345129,0.99224 0.474552,2.78259 0.474552,2.78259"
       id="path1" /><path
     style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.267771;stroke-opacity:1"
     d="m 28.605532,101.2559 24.091906,-3.008406 c 0,0 3.467911,-1.176825 5.082789,8.730226 1.614861,9.90703 -0.791081,18.3806 -0.791081,18.3806 0,0 -11.414219,-3.07468 -17.108406,-0.0375 -5.694186,3.03716 -11.681335,7.69087 -11.681335,7.69087 0,0 -2.227348,1.47593 0.228812,-6.76732 2.456168,-8.24327 0.934397,-20.30368 0.934397,-20.30368 0,0 -1.348449,-3.37373 -1.102249,-3.99047 0.246199,-0.61674 0.345167,-0.69431 0.345167,-0.69431 z"
     id="path7-9-8-5" /><path
     style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.410326;stroke-opacity:1"
     d="m 66.657451,114.86321 41.245319,-4.12632 c 0,0 5.93706,-1.61413 8.70173,11.97436 2.76464,13.58845 -1.35433,25.21078 -1.35433,25.21078 0,0 -19.541132,-4.21722 -29.289575,-0.0515 -9.748441,4.16576 -19.998434,10.54878 -19.998434,10.54878 0,0 -3.813217,2.02437 0.391727,-9.28204 4.204956,-11.30645 1.599686,-27.84848 1.599686,-27.84848 0,0 -2.308544,-4.6274 -1.88705,-5.47332 0.421494,-0.84592 0.590927,-0.95231 0.590927,-0.95231 z"
     id="path7-9-8" /><path
     style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.355382;stroke-opacity:1"
     d="m 64.037466,73.317615 35.800938,-3.565952 c 0,0 5.153366,-1.394926 7.553106,10.348199 2.3997,11.743102 -1.17556,21.787088 -1.17556,21.787088 0,0 -16.961704,-3.644509 -25.423353,-0.0445 -8.461648,3.60003 -17.358643,9.11622 -17.358643,9.11622 0,0 -3.309872,1.74945 0.340019,-8.02151 3.649903,-9.771 1.388528,-24.066573 1.388528,-24.066573 0,0 -2.003816,-3.998987 -1.63796,-4.73003 0.365857,-0.731043 0.512925,-0.822977 0.512925,-0.822977 z"
     id="path7-9" />
     <path
       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="m 129.40366,97.129003 29.65119,-2.257393 c 0,0 4.27074,-0.915162 6.22309,6.95522 1.95234,7.87037 -1.03719,14.58155 -1.03719,14.58155 0,0 -14.03245,-2.50144 -21.04868,-0.12202 -7.01623,2.37941 -14.39852,6.04006 -14.39852,6.04006 0,0 -2.74548,1.1592 0.30505,-5.36894 3.05054,-6.52815 1.22022,-16.10682 1.22022,-16.10682 0,0 -1.64729,-2.684474 -1.34224,-3.172559 0.30505,-0.488085 0.42708,-0.549098 0.42708,-0.549098 z"
       id="path7" /><path
       style="fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.264583;stroke-opacity:1"
       d="m 130.98993,131.17296 36.72843,-3.35558 c 0,0 4.39277,10.18878 1.03718,17.32703 -3.35558,7.13825 -6.34511,12.0191 -6.34511,12.0191 0,0 -14.52054,-5.61298 -28.49198,0.30506 -13.97145,5.91803 -10.06677,2.80649 -7.62634,-0.061 2.44043,-2.8675 5.97905,-20.37757 5.06389,-23.24507 -0.91516,-2.86751 -2.37942,-2.68447 -0.61011,-2.98953 1.76931,-0.30505 0.24404,0 0.24404,0 z"
       id="path8" />
       </g>
       </svg>

    <svg id="waveSVG">  
    <g>    
      <polygon id="wave" />
    </g>  
  </svg>
  </div>
`;

function wave() {
  // gsap.defaultEase = easeInOut;
  console.log(gsap);
  gsap.set("g", { y: 10 });

  var svg = document.querySelector("svg");
  var wave = document.querySelector("#wave");
  var boat = document.querySelector("#boat");
  var width = document.getElementById("waveSVG").getBoundingClientRect().width;

  var amplitude = 50;
  var frequency = 2;
  var segments = 700;
  var interval = width / segments;

  for (var i = 0; i < segments; i++) {
    var norm = i / segments;
    var point = wave.points.appendItem(svg.createSVGPoint());
    point.x = i * interval;
    point.y = amplitude / 2;

    gsap
      .to(point, 3, {
        y: -point.y,
        repeat: -1,
        ease: "sine.inOut",
        yoyo: true,
      })
      .progress(norm * frequency);

    gsap
      .fromTo(
        boat,
        {
          rotation: -13,
          y: 100,
          startAt: 5,
        },
        {
          duration: 3,
          rotation: 10,
          y: 150,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
        }
      )
      .seek(0.1);
    // Bottom right/left points
    var br = wave.points.appendItem(svg.createSVGPoint());
    br.x = width;
    br.y = 200;

    var bl = wave.points.appendItem(svg.createSVGPoint());
    bl.x = 0;
    bl.y = 200;
  }
}
wave();
